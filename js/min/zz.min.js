"use strict";var zz=new function(){function y(e,n){var r=new Image;r.src=e;var i=t;r.onerror=function(){if(i--){r.src=e}else{throw new Error("Cannot load image files: "+e)}};r.onload=function(){if(typeof n=="function"){n()}};return r}function b(e,n){var r=document.getElementsByTagName("head")[0];var i=t;(function s(){var t=document.createElement("script");t.type="text/javascript";t.src=e;t.onerror=function(){if(i--){s()}else{throw new Error("Cannot load script files: "+e)}};t.onload=function(){if(typeof n=="function"){n()}};r.appendChild(t)})()}function S(){for(var e in w){E[e]=w[e]}}var e=30;var t=3;var n=function(){var e=navigator.userAgent;var t=function(){if(e.indexOf("WebKit")!=-1){return"Webkit"}else if(e.indexOf("Gecko")!=-1){return"Gecko"}else{return"NoSupport"}}();var n=[{pattern:/\((iPhone|iPad|iPod); .*CPU .*OS ([0-9]_[0-9])/,os:"iOS",model:function(e){return e[1]},version:function(e){return parseFloat(e[2].replace("_","."))}},{pattern:/Mozilla\/5.0 \(Linux; U; Android (\d+\.\d+)\.\d+; [a-z]{2}-[a-z]{2}; (\S+) /,os:"Android",model:function(e){return e[2]},version:function(e){return parseFloat(e[1])}},{pattern:/Mozilla\/5.0 \((Windows NT) (\d+\.\d+); .*\)/,os:"Windows",model:function(e){return e[1]},version:function(e){return parseFloat(e[2])}},{pattern:/Mozilla\/5.0 \((Macintosh); Intel Mac OS X (\d+[_.]\d+)/,os:"Mac OS X",model:function(e){return e[1]},version:function(e){return parseFloat(e[2].replace("_","."))}}];var r=document.createElement("div");r.setAttribute("ontouchstart","return");var i={USER_AGENT:e,RENDERING_ENGINE:t,VENDER_PREFIX:{Webkit:"webkit",Gecko:"Moz",NoSupport:""}[t],OS:"Unknown",MODEL:"Unknown",VERSION:0,TOUCH_ENABLED:typeof r.ontouchstart==="function"};for(var s=0,o=n.length;s<o;s++){var u=n[s];var a=e.match(u.pattern);if(a){i.OS=u.os;i.MODEL=u.model(a);i.VERSION=u.version(a);return i}}alert("Browser not supported.");return i}();var r=n.OS=="Android";var i=n.VENDER_PREFIX;var s={TOP:1,BOTTOM:2,MIDDLE:3,LEFT:4,RIGHT:8,CENTER:12};var o=function(e,t){for(var n in t){if(t.hasOwnProperty(n)){if(typeof t[n]=="function"){t[n]={writable:true,enumerable:true,value:t[n]}}}}return Object.create(e.prototype,t)};var u=new function(){var e={ENTER_FRAME:"__enter_frame__",COMPLETE:"__complete__"};var t=function(e){this.name=e;this.x=0;this.y=0};for(var n in e){t[n]=e[n]}return t};var a=new function(){if(n.TOUCH_ENABLED){return{TOUCH_DOWN:"touchstart",TOUCH_MOVE:"touchmove",TOUCH_UP:"touchend",TOUCH_OUT:"touchcancel"}}else{return{TOUCH_DOWN:"mousedown",TOUCH_MOVE:"mousemove",TOUCH_UP:"mouseup",TOUCH_OUT:"mouseout"}}};var f={NORMAL:"normal",FULL_SCREEN:"fullscreen"};var l=new function(){var e=function(){this.eventContainer=new Object};e.prototype={addEventListener:function(e,t){if(!this.eventContainer[e]){this.eventContainer[e]=new Array}this.removeEventListener(e,t);this.eventContainer[e].push(t)},removeEventListener:function(e,t){if(!this.eventContainer[e]){return}var n=this.eventContainer[e].length;for(var r=0;r<n;r++){if(t==this.eventContainer[e][r]){this.eventContainer[e].splice(r,1);return}}},cleanEventListener:function(e){if(e){delete this.eventContainer[e]}else{this.eventContainer={}}},dispatchEvent:function(e){var t;var n;var r=false;if(typeof e=="string"){t=e;n=new Object;n.name=t}else{t=e.name;n=e}n.target=this;if(!this.eventContainer[t]){return r}var i=this.eventContainer[t].length;for(var s=0;s<i;s++){if(this.eventContainer[t][s]==undefined){r|=this.eventContainer[t].splice(s,1)}else{r|=this.eventContainer[t][s](n)}}return r}};return e};var c=new function(){function t(e,t){var r=t.element.getBoundingClientRect();var i=new u(e.type);if(n.TOUCH_ENABLED){if(e.touches.length){i.x=~~(e.touches[0].clientX-r.left);i.y=~~(e.touches[0].clientY-r.top)}}else{i.x=~~(e.clientX-r.left);i.y=~~(e.clientY-r.top)}var s=t.dispatchEvent(i);if(s){e.preventDefault();e.stopPropagation()}}var e=function(){l.apply(this);if(!this.element){this.element=document.createElement("div")}this.style=this.element.style;this.style.position="absolute";this.style[i+"TapHighlightColor"]="rgba(0,0,0,0)";this.style[i+"TouchCallout"]="none";this.style[i+"UserSelect"]="none";this._name="";this.parent=null;this._x=0;this._y=0;this._width=0;this._height=0;this._scaleX=1;this._scaleY=1;this._rotation=0;this._alpha=1;this._visible=true;this._dirty=false;this.referenceX=0;this.referenceY=0;this._reference=null;this.referencePoint=s.LEFT|s.TOP;this.enabled=true;var e=this;for(var n in a){this.element["on"+a[n]]=function(n){if(e.enabled){t(n,e)}}}};e.prototype=o(l,{transform:function(){this.style[i+"Transform"]=["translate("+this._x+"px,"+this._y+"px)","rotate("+this.rotation+"deg)","scale("+this.scaleX+","+this.scaleY+")"].join(" ")},setPosition:function(e,t){this.x=e;this.y=t},setSize:function(e,t){this.width=e;this.height=t},setRect:function(e,t,n,r){this.setPosition(e,t);this.setSize(n,r)},onEnterFrame:function(){this.dispatchEvent(u.ENTER_FRAME);if(this._dirty){this.transform();this._dirty=false}},globalToLocal:function(e,t){throw new Error("Not implemented error.")},localToGlobal:function(e,t){throw new Error("Not implemented error.")},render:function(){},name:{get:function(){return this._name},set:function(e){if(this.parent){this.parent.nameMap[this._name]=null;this.parent.nameMap[e]=this}this._name=e}},root:{get:function(){var e=this;var t=this.parent;while(t){e=t;t=t.parent}return e}},x:{get:function(){return this._x},set:function(e){this._x=e;this._dirty=true}},y:{get:function(){return this._y},set:function(e){this._y=e;this._dirty=true}},width:{get:function(){var e=this._width*this.scaleX;var t=this.parent;while(t){e*=t.scaleX;t=t.parent}return e},set:function(e){this._width=e;this.style.width=e+"px";this.referencePoint=this._reference}},height:{get:function(){var e=this._height*this.scaleY;var t=this.parent;while(t){e*=t.scaleY;t=t.parent}return e},set:function(e){this._height=e;this.style.height=e+"px";this.referencePoint=this._reference}},scaleX:{get:function(){return this._scaleX},set:function(e){this._scaleX=e;this._dirty=true}},scaleY:{get:function(){return this._scaleY},set:function(e){this._scaleY=e;this._dirty=true}},scale:{set:function(e){this._scaleX=e;this._scaleY=e;this._dirty=true}},rotation:{get:function(){return this._rotation},set:function(e){this._rotation=e;this._dirty=true}},alpha:{get:function(){return this._alpha},set:function(e){this.style.opacity=this._alpha=e}},visible:{get:function(){return this._visible},set:function(e){function n(){if(t._visible){t.style.display="block"}else{t.style.display="none"}t.removeEventListener(u.ENTER_FRAME,n)}this._visible=e;var t=this;if(this._visible){this.addEventListener(u.ENTER_FRAME,n)}else{this.style.display="none"}}},backgroundColor:{get:function(){return this.style.backgroundColor},set:function(e){this.style.backgroundColor=e}},referencePoint:{get:function(){return this.style[i+"TransformOrigin"]},set:function(e){this._reference=e;if((e&s.CENTER)==s.CENTER){this.referenceX=50;this.style.left=-~~(this._width/2)+"px"}else if((e&s.RIGHT)==s.RIGHT){this.referenceX=100;this.style.left=-this._width+"px"}else{this.referenceX=0;this.style.left="0px"}if((e&s.MIDDLE)==s.MIDDLE||e==s.CENTER){this.referenceY=50;this.style.top=-~~(this._height/2)+"px"}else if((e&s.BOTTOM)==s.BOTTOM){this.referenceY=100;this.style.top=-this._height+"px"}else{this.referenceY=0;this.style.top="0px"}this.style[i+"TransformOrigin"]=this.referenceX+"% "+this.referenceY+"%";this._dirty=true}},removeSelf:function(){this.parent.removeChild(this)}});return e};var h=new function(){var e=function(){c.apply(this);this.children=new Array;this.nameMap=new Object};e.prototype=o(c,{addChild:function(e){e.parent=this;this.element.appendChild(e.element);this.children.push(e);c.prototype.transform.call(e);if(e.name){this.nameMap[e.name]=e}},addChildAt:function(e,t){e.parent=this;if(t<this.numChildren){this.element.insertBefore(e.element,this.children[t].element)}else{this.element.appendChild(e.element)}this.children.splice(t,0,e);c.prototype.transform.call(e);if(e.name){this.nameMap[e.name]=e}},removeChild:function(e){for(var t=0,n=this.numChildren;t<n;t++){if(this.children[t]==e){e.cleanEventListener();this.element.removeChild(e.element);delete this.children[t];break}}if(this.children.length===0){this.children=[]}},getChildAt:function(e){return this.children[e]},getChildByName:function(e){if(e in this.nameMap){return this.nameMap[e]}return null},getChildIndex:function(e){for(var t=0,n=this.numChildren;t<n;t++){if(this.children[t]==e){return t}}throw new Error("child is not contained.")},setChildIndex:function(e,t){for(var n=0,r=this.numChildren;n<r;n++){if(n!=t&&this.children[n]==e&&t<r){if(t<n){this.element.insertBefore(e.element,this.children[t].element)}else{this.element.insertBefore(e.element,this.children[t].element.nextSibling)}this.children.splice(n,1);this.children.splice(t,0,e);break}}},swapChildren:function(e,t){var n=-1;var r=-1;for(var i=0,s=this.numChildren;i<s;i++){if(this.children[i]==e){n=i}else if(this.children[i]==t){r=i}}if(n>=0&&r>=0){this.children.splice(n,1,t);this.children.splice(r,1,e);var o=e.element.nextSibling;var u=t.element.nextSibling;if(o===null){this.element.insertBefore(e.element,u);this.element.insertBefore(t.element,o)}else{this.element.insertBefore(t.element,o);this.element.insertBefore(e.element,u)}}},render:function(){if(this._visible){c.prototype.render.call(this);for(var e=0,t=this.numChildren;e<t;e++){if(this.children[e]){this.children[e].render()}}}},onEnterFrame:function(){function r(e){if(e<n.length){if(!n[e]){n.splice(e,1)}++e;r(e)}}c.prototype.onEnterFrame.apply(this);for(var e=0,t=this.numChildren;e<t;e++){if(this.children[e]){this.children[e].onEnterFrame()}}var n=this.children;r(0)},numChildren:{get:function(){return this.children.length}}});return e};var p=new function(){var t=function(t){var n=document.getElementById(t);if(!n){n=document.createElement("div");n.id=t;n.style.width=window.innerWidth+"px";n.style.height=window.innerHeight+"px";document.body.appendChild(n)}this.element=n;h.apply(this);this.frameRate=e;this.x=0;this.y=0;this.parent=null;this.style=n.style;this.style.position="relative";this.style.overflow="hidden";this._width=parseInt(this.style.width,10);this._height=parseInt(this.style.height,10);this.handle=null;this.start()};t.prototype=o(h,{onEnterFrame:function(){var e=+(new Date);h.prototype.onEnterFrame.call(this);this.render();var t=+(new Date)-e;var n=~~(1e3/this.frameRate)-t;if(n<1){n=1}var r=this;this.handle=setTimeout(function(){r.onEnterFrame()},n)},start:function(){if(!this.running){this.onEnterFrame()}},pause:function(){if(this.handle){clearTimeout(this.handle);this.handle=null}},running:{get:function(){return this.handle!==null}},end:function(){document.body.removeChild(this.element)},displayState:{set:function(e){var t=i.toLowerCase();switch(e){case f.FULL_SCREEN:if(typeof document[t+"CancelFullScreen"]!="undefined"){if(this.displayState!=f.FULL_SCREEN){if(this.element[t+"RequestFullScreen"]){this.element[t+"RequestFullScreen"]()}}}break;case f.NORMAL:if(document[t+"CancelFullScreen"]){document[t+"CancelFullScreen"]()}break;default:break}},get:function(){var e=i.toLowerCase();if(e=="webkit"&&document.webkitIsFullScreen||document.fullScreen||document[e+"FullScreen"]){return f.FULL_SCREEN}return f.NORMAL}}});return t};var d=new function(){var e=function(e,t,n){this.canvas=document.createElement("canvas");h.apply(this);this.canvas.style.position="absolute";this.context=this.canvas.getContext("2d");this.element.appendChild(this.canvas);var r=this;if(e){this.img=y(e,function(){r.width=r.img.width;r.height=r.img.height;r.canvas.width=r._width;r.canvas.height=r._height;r.tw=r._width;r.th=r._height;r.referencePoint=r._reference;r.trimming(r.tx,r.ty,r.tw,r.th);r.loaded=true;r.dispatchEvent(new u(u.COMPLETE))})}else{this.width=0;this.height=0;this.canvas.width=0;this.canvas.height=0}if(t!=undefined&&n!=undefined){this.setPosition(t,n)}this.tx=0;this.ty=0;this.tw=this._width;this.th=this._height;this.loaded=false;this.imageData=null;this._originalImageData=null;this._brightness=0;this._red=100;this._green=100;this._blue=100;this._canvasDirty=true};e.prototype=o(h,{width:{get:function(){var e=Object.getOwnPropertyDescriptor(c.prototype,"width");return e.get.call(this)},set:function(e){var t=Object.getOwnPropertyDescriptor(c.prototype,"width");t.set.call(this,e);this.canvas.width=e}},height:{get:function(){var e=Object.getOwnPropertyDescriptor(c.prototype,"height");return e.get.call(this)},set:function(e){var t=Object.getOwnPropertyDescriptor(c.prototype,"height");t.set.call(this,e);this.canvas.height=e}},trimming:function(e,t,n,r){if(e<0){e=0}else if(this.loaded&&e>this.img.width){e=this.img.width}this.tx=e;if(t<0){t=0}else if(this.loaded&&t>this.img.height){t=this.img.height}this.ty=t;if(n<=0){n=1}else if(n>this.img.width){n=this.img.width}this.tw=n;if(r<=0){r=1}else if(r>this.img.height){r=this.img.height}this.th=r},setImageData:function(){if(this.loaded){this.getImageData()}else{var e=this;var t=function(){e.getImageData();e.removeEventListener(u.COMPLETE,t)};this.addEventListener(u.COMPLETE,t)}},brightness:{get:function(){return this._brightness},set:function(e){if(this._brightness==e){return}this._brightness=e;if(r){return}else{this.setImageData()}}},red:{get:function(){return this._red},set:function(e){if(this._red==e){return}this._red=e;if(r){return}this.setImageData()}},green:{get:function(){return this._green},set:function(e){if(this._green==e){return}this._green=e;if(r){return}this.setImageData()}},blue:{get:function(){return this._blue},set:function(e){if(this._blue==e){return}this._blue=e;if(r){return}this.setImageData()}},render:function(){if(this._visible){if(this.loaded){if(this._canvasDirty){this.context.clearRect(0,0,this._width,this._height);if(this.imageData){this.context.putImageData(this.imageData,0,0)}else{this.context.drawImage(this.img,this.tx,this.ty,this.tw,this.th,0,0,this._width,this._height)}this._canvasDirty=false}}h.prototype.render.call(this)}},getImageData:function(){if(this._originalImageData===null){this.context.clearRect(0,0,this._width,this._height);this.context.drawImage(this.img,this.tx,this.ty,this.tw,this.th,0,0,this._width,this._height);this._originalImageData=this.context.getImageData(0,0,this._width,this._height)}var e=this._originalImageData.data;this.imageData=this.context.createImageData(this._width,this._height);var t=this.imageData.data;var n=this.imageData.width;var r=this.imageData.height;for(var i=0;i<r;i++){for(var s=0;s<n;s++){var o=(i*n+s)*4;if(e[o+3]===0){continue}t[o+0]=e[o+0]*this._red/100+this._brightness*255/100;t[o+1]=e[o+1]*this._green/100+this._brightness*255/100;t[o+2]=e[o+2]*this._blue/100+this._brightness*255/100;t[o+3]=e[o+3]}}this._canvasDirty=true}});return e};var v=new function(){var e=function(e,t,n){d.apply(this,arguments);this.currentFrame=1;this.frames=new Array;this.playing=true;this.currentLabel="";this._mcDirty=true};e.prototype=o(d,{setAnimation:function(e){function s(e){e=parseInt(e,10);var t=this.frames[e];var n=e;for(var r=e+1,i=this.frames.length;r<i;r++){if(this.frames[r]){n=r;break}}if(e!=n){var s=this.frames[n];var o=n-e;for(var u in s){if(t[u]!=undefined&&typeof t[u]=="number"){var a=(s[u]-t[u])/o;for(r=e+1;r<n;r++){if(!this.frames[r]){this.frames[r]=new Object}this.frames[r][u]=this.frames[r-1][u]+a}}}}}this.frames=[];var t=new Array;for(var n in e){if(!this.frames[n]){this.frames[n]=new Object}var r=e[n];for(var i in r){this.frames[n][i]=r[i];if(i=="tween"&&r[i]){t.push(n)}}}for(var o=0,u=t.length;o<u;o++){var a=t[o];s.call(this,a)}},play:function(){++this.currentFrame;if(this.currentFrame>=this.frames.length){this.currentFrame=1}this.playing=true;this._mcDirty=true},stop:function(){this.playing=false;this._mcDirty=true},setFrame:function(e){if(typeof e=="string"){for(var t in this.frames){if(this.frames[t]["label"]){if(e==this.frames[t]["label"]){this.currentFrame=t;break}}}}else{this.currentFrame=e}this._mcDirty=true},gotoAndPlay:function(e){this.playing=true;this.setFrame.call(this,e)},gotoAndStop:function(e){this.playing=false;this.setFrame.call(this,e)},onEnterFrame:function(){var e=this.frames[this.currentFrame];if(this._mcDirty){if(e!=undefined){for(var t in e){if(t=="dispatch"){this.dispatchEvent(e["dispatch"])}else if(t=="event"){this.dispatchEvent(e["event"])}else if(t=="stop"){this.playing=false}else if(t=="gotoAndPlay"){this.gotoAndPlay(e["gotoAndPlay"])}else if(t=="gotoAndStop"){this.gotoAndStop(e["gotoAndStop"])}else if(t=="label"){this.currentLabel=e["label"]}else{this[t]=e[t]}}}this._mcDirty=false}h.prototype.onEnterFrame.call(this);if(this.playing){++this.currentFrame;if(this.currentFrame>=this.frames.length){this.currentFrame=1}this._mcDirty=true}}});return e};var m=new function(){var e=function(){this.font="";this.bold=false;this.italic=false;this.size=null;this.color=""};return e};var g=new function(){var e=function(){c.apply(this);this.text=""};e.prototype=o(c,{defaultTextFormat:{get:function(){return this._defaultTextFormat},set:function(e){this._defaultTextFormat=e;this.style.fontFamily=e.font;this.style.fontWeight=e.bold?"bold":"normal";this.style.fontStyle=e.italic?"italic":"normal";this.style.fontSize=e.size?e.size+"px":"";this.style.color=e.color}},text:{get:function(){return this.element.innerHTML},set:function(e){this.element.innerHTML=e;this.setSize(this.width,this.height)}},textColor:{get:function(){return this.style.color},set:function(e){this.style.color=e}},visible:{get:function(){return this._visible},set:function(e){function n(){if(t._visible){t.style.visibility="visible"}else{t.style.visibility="hidden"}t.removeEventListener(u.ENTER_FRAME,n)}this._visible=e;var t=this;if(this._visible){this.addEventListener(u.ENTER_FRAME,n)}else{this.style.visibility="hidden"}}},width:{get:function(){return this.element.clientWidth},set:function(e){this._width=e;this.referencePoint=this._reference}},height:{get:function(){return this.element.clientHeight},set:function(e){this._height=e;this.referencePoint=this._reference}}});return e};var w={ENV:n,Event:u,TouchEvent:a,ReferencePoint:s,StageDisplayState:f,EventDispatcher:l,DisplayObject:c,DisplayObjectContainer:h,Stage:p,Sprite:d,MovieClip:v,TextFormat:m,TextField:g};var E={globalize:function(){for(var e in w){window[e]=w[e]}},createClass:o,DISPLAY:s,preload:function(e,t){function r(){--n;if(n===0){if(typeof t=="function"){t()}}}if(!(e instanceof Array)){throw new Error("assets must be array.")}var n=e.length;for(var i=0;i<n;++i){E.load(e[i],r)}},load:function(e,t){if(e.match(/\.\w+$/)){var n=RegExp.lastMatch.slice(1).toLowerCase();switch(n){case"gif":case"jpg":case"png":y(e,t);break;case"js":b(e,t);break;default:break}}},importModules:function(e,t){var n=new Array;for(var r=0,i=e.length;r<i;r++){var s=e[r].split("/").pop().split(".")[1];n.push(s)}E.preload(e,function(){for(var e=0,r=n.length;e<r;e++){var i=zz[n[e]];for(var s in i){w[s]=i[s]}}S();if(t){t()}})}};S();return E}