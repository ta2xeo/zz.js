"use strict";zz.debug=new function(){var a=10000;var b=zz.ReferencePoint;var c={REDRAW:"__redraw__",UPDATE_TREE:"__update_tree__"};var d=null;var e=null;var f=[{"property":"x","title":"X","type":x,"ratio":1},{"property":"y","title":"Y","type":x,"ratio":1},{"property":"width","title":"W","type":x,"ratio":1},{"property":"height","title":"H","type":x,"ratio":1},{"property":"rotation","title":"回転","type":x,"ratio":1},{"property":"alpha","title":"アルファ(％)","type":x,"ratio":100},{"property":"scaleX","title":"X(％)","type":x,"ratio":100},{"property":"scaleY","title":"Y(％)","type":x,"ratio":100},{"property":"visible","title":"表示","type":y},{"property":"referencePoint","title":"参照位置","type":z},{"property":"tx","title":"TX","type":x,"ratio":1},{"property":"ty","title":"TY","type":x,"ratio":1},{"property":"tw","title":"TW","type":x,"ratio":1},{"property":"th","title":"TH","type":x,"ratio":1},{"property":"timeLine","title":"MC(-/-)","type":A}];function g(a){return window.localStorage.getItem(a)||null;}function h(a,b){window.localStorage.setItem(a,b);}function i(){if(d)for(var a=0;a<f.length;a++){var c=f[a];var e=c.property;var g=c.input;switch(e){case "timeLine":if(d instanceof zz.MovieClip)c.element.style.display="block";else{c.element.style.display="none";continue;}break;case "tx":case "ty":case "tw":case "th":if(d instanceof zz.Sprite)c.element.style.display="block";else{c.element.style.display="none";continue;}break;default:break;}if(document.activeElement!=g&&g.value!==d[e])switch(c.type){case x:g.value=d[e]*c.ratio;break;case y:g.checked=d[e];break;case z:for(var h=0;h<g.options.length;h++){var i=d[e]==b.CENTER?b.CENTER|b.MIDDLE:d[e];if(g.options[h].value==i)g.options[h].selected=true;}break;case A:g.min=1;var j=d.totalFrames;g.max=j;var k=c.title;k.innerHTML=["MC(",d.currentFrame,"/",j,")"].join("");g.value=d.currentFrame;break;default:break;}}}var j=[];function k(b,c,d){var e=document.getElementById(b);if(e)return e;var f=document.createElement("div");j.push(f);f.id=b;f.className="zz_debug_window";f.style.zIndex=a;if(d)for(var i in d){var k=d[i];f.style[i]=k;}var l=document.createElement("div");l.className="zz_debug_title";l.innerHTML=c;f.appendChild(l);(function(){var c=false,d,e;var i=g(b+"X");var k=g(b+"Y");if(i&&k){f.style.position="absolute";f.style.left=i;f.style.top=k;f.style.bottom="";f.style.right="";}function m(a){if(c){var b=window.pageXOffset;var g=window.pageYOffset;f.style.left=b+a.clientX-d+"px";f.style.top=g+a.clientY-e+"px";a.preventDefault();}}f.addEventListener("mousedown",function(b){for(var c=0,d=j.length;c<d;c++){var e=j[c];if(e===f)e.style.zIndex=a+1;else e.style.zIndex=a;}var g={"input":1,"select":1};if(!(b.target.tagName.toLowerCase() in g)){b.preventDefault();b.stopPropagation();}});l.addEventListener("mousedown",function(a){c=true;d=a.layerX;e=a.layerY;var b=f.getBoundingClientRect();var g=window.pageXOffset;var h=window.pageYOffset;f.style.left=g+b.left+"px";f.style.top=h+b.top+"px";f.style.bottom="";f.style.right="";f.style.position="absolute";document.addEventListener("mousemove",m);});function n(a){c=false;document.removeEventListener("mousemove",m);h(b+"X",f.style.left);h(b+"Y",f.style.top);a.preventDefault();}l.addEventListener("mouseup",n);})();return f;}function l(){var a=k("zz_debug_property_window","プロパティ",{position:"absolute",right:"0px",bottom:"0px"});document.body.appendChild(a);for(var b=0;b<f.length;b++){var c=f[b];a.appendChild(c.type(c));}return a;}window.addEventListener("load",l);function m(){var a="zz_debug_object_tree_window";var b=document.getElementById(a);if(b)return b;var c=k(a,"DisplayObject Tree",{position:"absolute",left:"0px",bottom:"0px"});document.body.appendChild(c);var d=document.createElement("div");d.id="zz_debug_object_tree";c.appendChild(d);return c;}var n;var o,p;var q;var r;var s;var t;function u(a,b){p.value=b.actuallyFrameRate;function d(){o.innerHTML=["FPS 本来:",e.expectFrameRate,"/設定値:",e.actuallyFrameRate].join("");}function f(){r.innerHTML="現在:"+e.frameCount+"フレーム目"+(e.running?"再生中":"停止中");if(e.running)q.value="一時停止";else q.value="再生";}if(a){a.removeEventListener(Event.ENTER_FRAME,d);a.removeEventListener(Event.ENTER_FRAME,f);a.removeEventListener(zz.Event.ENTER_FRAME,i);}b.addEventListener(Event.ENTER_FRAME,d);b.addEventListener(Event.ENTER_FRAME,f);var h=parseInt(g("zz_debug_stageColor_"+b.element.id)||0,10);s.options[h].selected=true;t.checked=g("zz_debug_stageOverflow_"+b.element.id);b.style.overflow=t.checked?"":"hidden";b.dispatchEvent(c.UPDATE_TREE);}function v(a){e=a;var b="zz_debug_stage_window";var c=document.getElementById(b);if(!c){c=k(b,"Stage設定",{position:"absolute",top:"0px",left:"0px"});document.body.appendChild(c);(function(){var a=document.createElement("div");a.innerHTML="ステージ選択:";n=document.createElement("select");n.id="zz_debug_stage_window_selector";a.appendChild(n);c.appendChild(a);n.addEventListener("mouseup",function(a){var b=e;e=n.options[n.selectedIndex].stage;u(b,e);});})();(function(){var b=document.createElement("div");o=document.createElement("span");o.innerHTML="FPS:";p=document.createElement("input");p.type="range";p.max=60;p.min=1;p.value=a.actuallyFrameRate;p.addEventListener("mousedown",function(a){a.stopPropagation();});function d(){var a=parseInt(p.value,10);if(!isNaN(a)){e.actuallyFrameRate=a;h("zz_debug_FrameRate_"+e.element.id,a);}}p.addEventListener("change",d);p.addEventListener("input",d);b.appendChild(o);b.appendChild(p);c.appendChild(b);})();(function(){var a=document.createElement("div");r=document.createElement("span");function b(a){var b=document.createElement("input");b.type="button";b.value=a;b.style.margin="5px 5px";b.style.width="100px";return b;}q=b("一時停止");q.addEventListener("click",function(a){if(e.running){e.pause();q.value="再生";r.innerHTML="現在:"+e.frameCount+"フレーム目停止中";}else{e.start();q.value="一時停止";r.innerHTML="現在:"+e.frameCount+"フレーム目再生中";}});a.appendChild(q);a.appendChild(r);c.appendChild(a);})();(function(){var b=document.createElement("div");var d=document.createElement("span");d.innerHTML="ステージ色:";var f=s=document.createElement("select");var i=[["透明",""],["半透明(黒10%)","rgba(0, 0, 0, 0.1)"],["半透明(黒25%)","rgba(0, 0, 0, 0.25)"],["黒","#000"],["白","#fff"],["赤","#f00"],["緑","#0f0"],["青","#00f"]];var j=parseInt(g("zz_debug_stageColor_"+e.element.id)||0,10);for(var k=0;k<i.length;k++){var l=i[k];f.innerHTML+=['<option value="',l[1],'">',l[0],"</option>"].join("");}f.options[j].selected=true;a.backgroundColor=f.options[j].value;f.addEventListener("mouseup",function(a){var b=f.options[f.selectedIndex].value;e.backgroundColor=b;h("zz_debug_stageColor_"+e.element.id,f.selectedIndex);});b.appendChild(d);b.appendChild(f);c.appendChild(b);})();(function(){var a=document.createElement("div");var b=document.createElement("span");b.innerHTML="ステージ外表示";var d=t=document.createElement("input");d.type="checkbox";d.addEventListener("click",function(a){e.style.overflow=d.checked?"":"hidden";h("zz_debug_stageOverflow_"+e.element.id,d.checked||"");});a.appendChild(b);a.appendChild(d);c.appendChild(a);})();}var d=document.createElement("option");d.innerHTML=a.element.id;d.selected=true;d.stage=a;n.appendChild(d);u(null,a);return c;}function w(a){var b=document.createElement("div");var c=document.createElement("span");c.innerHTML=a.title+":";var d=document.createElement("input");d.addEventListener("mousedown",function(a){a.stopPropagation();});d.addEventListener("mousemove",function(a){a.preventDefault();a.stopPropagation();});a.title=c;a.input=d;a.element=b;b.appendChild(c);b.appendChild(d);return b;}function x(a){var b=a.property;var e=w(a);var f=a.input;f.type="number";f.addEventListener("input",function(e){if(d&&f.value){var g=null;var h=parseInt(f.value,10);if(!isNaN(h))g=h/a.ratio;if(g!==null){d[b]=g;d.dispatchEvent(c.REDRAW);d.transform();}}e.preventDefault();});return e;}function y(a){var b=a.property;var c=w(a);var e=a.input;e.type="checkbox";e.addEventListener("click",function(a){if(d){var c=e.checked;if(c!==null){d[b]=c;d.dispatchEvent(zz.Event.ENTER_FRAME);}}});return c;}function z(a){function c(a,b,c){return ['<option name="',a,'" value="',b,'">',c,'</option>'].join("");}var e=[c("LT",b.LEFT|b.TOP,"左上"),c("LM",b.LEFT|b.MIDDLE,"左中"),c("LB",b.LEFT|b.BOTTOM,"左下"),c("CT",b.CENTER|b.TOP,"中上"),c("CM",b.CENTER|b.MIDDLE,"中中"),c("CB",b.CENTER|b.BOTTOM,"中下"),c("RT",b.RIGHT|b.TOP,"右上"),c("RM",b.RIGHT|b.MIDDLE,"右中"),c("RB",b.RIGHT|b.BOTTOM,"右下")].join("");var f=a.property;var g=document.createElement("div");var h=document.createElement("span");h.innerHTML=a.title+":";var i=document.createElement("select");i.innerHTML=e;i.addEventListener("mouseup",function(a){var b=i.options[i.selectedIndex].value;if(d){d[f]=b;d.transform();}});g.appendChild(h);g.appendChild(i);a.input=i;return g;}function A(a){var b=a.property;var c=w(a);c.style.display="none";var e=a.input;e.type="range";var f=a.title;function g(a){if(d&&e.value){var b=parseInt(e.value,10);if(d.playing)d.gotoAndPlay(b);else d.gotoAndStop(b);i();}a.preventDefault();}e.addEventListener("change",g);e.addEventListener("input",g);return c;}function B(a){if(d)(function b(a){a.style.outline="";if(a instanceof zz.DisplayObjectContainer)for(var c=0,d=a.numChildren;c<d;c++){var e=a.getChildAt(c);b(e);}})(d);var c=[{color:"rgb(0,50,255)",style:"solid",width:"3px"},{color:"rgb(50,150,255)",style:"dotted",width:"2px"},{color:"rgb(150,200,255)",style:"dashed",width:"1px"}];var f=c.length;var g=0;(function h(a){var b=c[g];a.style.outline=[b.width,b.style,b.color].join(" ");++g;if(g<f)if(a instanceof zz.DisplayObjectContainer)for(var d=0,e=a.numChildren;d<e;d++){var i=a.getChildAt(d);h(i);}--g;})(a);d=a;var i=e;e=d.root;u(i,e);for(var j=0;j<n.options.length;j++)if(e===n.options[j].stage)n.options[j].selected=true;else n.options[j].selected=false;}function C(){this.opened=false;this.addEventListener(zz.TouchEvent.TOUCH_DOWN,function(a){if(!a.shiftKey){this.opened=true;B(this);var b=this.parent;while(b){b.opened=true;b=b.parent;}this.root.dispatchEvent(c.UPDATE_TREE);return true;}});if(zz.ENV.RENDERING_ENGINE=="Gecko")this.addEventListener(c.REDRAW,function(){var a=this.style.outline;var b=this;function c(){b.style.outline=a;}if(a){this.style.outline="";setTimeout(c,100);}});}function D(){var a=this;this.addEventListener(KeyboardEvent.KEY_DOWN,function(a){if(d){var b=false;var e=a.shiftKey?10:1;switch(a.keyCode){case Keyboard.LEFT:d.x-=e;b=true;break;case Keyboard.RIGHT:d.x+=e;b=true;break;case Keyboard.UP:d.y-=e;b=true;break;case Keyboard.DOWN:d.y+=e;b=true;break;default:break;}if(b){d.dispatchEvent(c.REDRAW);d.transform();i();return true;}}return false;});var b=m();var e=document.getElementById("zz_debug_object_tree");function f(){i();while(e.firstChild)e.removeChild(e.firstChild);function b(e,f){var g=document.createElement("div");g.className="zz_debug_group";var h=g.style;if(f===d)h.outline="1px solid #f00";else h.outline="";function i(){if(f.opened)if(f instanceof zz.DisplayObjectContainer)for(var a=0,c=f.numChildren;a<c;a++){var d=f.getChildAt(a);if(d)b(g,d);}}function j(){var b=document.createElement("input");b.type="button";var d=b.style;b.onmousedown=function(b){B(f);a.dispatchEvent(c.UPDATE_TREE);};var e="["+(f.name||"-")+"]";if(f instanceof zz.DisplayObjectContainer)e+=" ("+f.numChildren+")";else e+=" (-)";b.value=e;return b;}function k(){var b=document.createElement("input");b.type="button";var d=b.style;b.value=f.opened?"-":"+";b.onmousedown=function(b){f.opened^=true;i();a.dispatchEvent(c.UPDATE_TREE);};return b;}g.appendChild(j());if(f instanceof zz.DisplayObjectContainer)g.appendChild(k());e.appendChild(g);i();}b(e,this);}this.addEventListener(c.UPDATE_TREE,f);this.addEventListener(zz.Event.ENTER_FRAME,i);(function(){this.expectFrameRate=g("zz_debug_FrameRate_"+this.element.id)||this.frameRate;this.actuallyFrameRate=this.expectFrameRate;Object.defineProperty(this,"frameRate",{get:function(){return this.actuallyFrameRate;},set:function(a){this.expectFrameRate=a;}});var a=v(this);}).call(this);}D.prototype=zz.createClass(D,{onEnterFrame:function(){if(this.frameCount===undefined)this.frameCount=0;if(this.timeLineElement)this.timeLineElement.innerHTML=" 現在:"+this.frameCount+"フレーム目";++this.frameCount;}});function E(){}E.prototype=zz.createClass(E,{addChildAt:function(){this.root.dispatchEvent(c.UPDATE_TREE);},removeChild:function(){this.root.dispatchEvent(c.UPDATE_TREE);},setChildIndex:function(){this.root.dispatchEvent(c.UPDATE_TREE);},swapChildren:function(){this.root.dispatchEvent(c.UPDATE_TREE);}});function F(a,b){function c(){a.apply(this,arguments);if(typeof b!="function")throw new zz.ZZError(b+" is not function.");b.apply(this,arguments);}c.prototype=a.prototype;function d(d){var e=b.prototype[d];var f=a.prototype[d];function g(){if(typeof f=="function")f.apply(this,arguments);if(typeof e=="function")e.apply(this,arguments);}c.prototype[d]=g;}for(var e in b.prototype)d(e);return c;}return zz.modularize(null,{DisplayObject:F(zz.DisplayObject,C),DisplayObjectContainer:F(zz.DisplayObjectContainer,E),Stage:F(zz.Stage,D)});}();