"use strict";zz.debug=new function(){var a=zz.ReferencePoint;var b={REDRAW:"__redraw__",UPDATE_TREE:"__update_tree__"};var c=null;var d=null;var e=[{"property":"x","title":"X","type":u,"ratio":1},{"property":"y","title":"Y","type":u,"ratio":1},{"property":"width","title":"W","type":u,"ratio":1},{"property":"height","title":"H","type":u,"ratio":1},{"property":"rotation","title":"回転","type":u,"ratio":1},{"property":"alpha","title":"アルファ(％)","type":u,"ratio":100},{"property":"scaleX","title":"X(％)","type":u,"ratio":100},{"property":"scaleY","title":"Y(％)","type":u,"ratio":100},{"property":"visible","title":"表示","type":v},{"property":"referencePoint","title":"参照位置","type":w},{"property":"tx","title":"TX","type":u,"ratio":1},{"property":"ty","title":"TY","type":u,"ratio":1},{"property":"tw","title":"TW","type":u,"ratio":1},{"property":"th","title":"TH","type":u,"ratio":1},{"property":"timeLine","title":"MC(-/-)","type":x}];function f(a){return window.localStorage.getItem(a)||null;}function g(a,b){window.localStorage.setItem(a,b);}function h(){if(c)for(var b=0;b<e.length;b++){var d=e[b];var f=d.property;var g=d.input;switch(f){case "timeLine":if(c instanceof zz.MovieClip)d.element.style.display="block";else{d.element.style.display="none";continue;}break;case "tx":case "ty":case "tw":case "th":if(c instanceof zz.Sprite)d.element.style.display="block";else{d.element.style.display="none";continue;}break;default:break;}if(document.activeElement!=g&&g.value!==c[f])switch(d.type){case u:g.value=c[f]*d.ratio;break;case v:g.checked=c[f];break;case w:for(var h=0;h<g.options.length;h++){var i=c[f]==a.CENTER?a.CENTER|a.MIDDLE:c[f];if(g.options[h].value==i)g.options[h].selected=true;}break;case x:g.min=1;var j=c.totalFrames;g.max=j;var k=d.title;k.innerHTML=["MC(",c.currentFrame,"/",j,")"].join("");g.value=c.currentFrame;break;default:break;}}}function i(a,b,c){var d=document.getElementById(a);if(d)return d;var e=document.createElement("div");e.id=a;e.className="zz_debug_window";if(c)for(var h in c){var i=c[h];e.style[h]=i;}var j=document.createElement("div");j.className="zz_debug_title";j.innerHTML=b;e.appendChild(j);(function(){var b=false,c,d;var h=f(a+"X");var i=f(a+"Y");if(h&&i){e.style.position="absolute";e.style.left=h;e.style.top=i;e.style.bottom="";e.style.right="";}function k(a){if(b){var f=window.pageXOffset;var g=window.pageYOffset;e.style.left=f+a.clientX-c+"px";e.style.top=g+a.clientY-d+"px";a.preventDefault();}}j.addEventListener("mousedown",function(a){b=true;c=a.layerX;d=a.layerY;var f=e.getBoundingClientRect();var g=window.pageXOffset;var h=window.pageYOffset;e.style.left=g+f.left+"px";e.style.top=h+f.top+"px";e.style.bottom="";e.style.right="";e.style.position="absolute";document.addEventListener("mousemove",k);a.preventDefault();a.stopPropagation();});function l(c){b=false;document.removeEventListener("mousemove",k);g(a+"X",e.style.left);g(a+"Y",e.style.top);c.preventDefault();}j.addEventListener("mouseup",l);})();return e;}function j(){var a=i("zz_debug_property_window","プロパティ",{position:"absolute",right:"0px",bottom:"0px"});document.body.appendChild(a);for(var b=0;b<e.length;b++){var c=e[b];a.appendChild(c.type(c));}return a;}window.addEventListener("load",j);function k(){var a="zz_debug_object_tree_window";var b=document.getElementById(a);if(b)return b;var c=i(a,"DisplayObject Tree",{position:"absolute",left:"0px",bottom:"0px"});document.body.appendChild(c);var d=document.createElement("div");d.id="zz_debug_object_tree";c.appendChild(d);return c;}var l;var m,n;var o;var p;var q;var r;function s(a){d=a;var c="zz_debug_stage_window";var e=document.getElementById(c);function j(a,c){n.value=c.actuallyFrameRate;function e(){m.innerHTML=["FPS 本来:",d.expectFrameRate,"/設定値:",d.actuallyFrameRate].join("");}function g(){p.innerHTML="現在:"+d.frameCount+"フレーム目"+(d.running?"再生中":"停止中");if(d.running)o.value="一時停止";else o.value="再生";}if(a){a.removeEventListener(Event.ENTER_FRAME,e);a.removeEventListener(Event.ENTER_FRAME,g);a.removeEventListener(zz.Event.ENTER_FRAME,h);}c.addEventListener(Event.ENTER_FRAME,e);c.addEventListener(Event.ENTER_FRAME,g);var i=parseInt(f("zz_debug_stageColor_"+c.element.id)||0,10);q.options[i].selected=true;r.checked=f("zz_debug_stageOverflow_"+c.element.id);c.style.overflow=r.checked?"":"hidden";c.dispatchEvent(b.UPDATE_TREE);}if(!e){e=i(c,"Stage設定",{position:"absolute",top:"0px",left:"0px"});document.body.appendChild(e);(function(){var a=document.createElement("div");a.innerHTML="ステージ選択:";l=document.createElement("select");l.id="zz_debug_stage_window_selector";a.appendChild(l);e.appendChild(a);l.addEventListener("mouseup",function(a){var b=d;d=l.options[l.selectedIndex].stage;j(b,d);});})();(function(){var b=document.createElement("div");m=document.createElement("span");m.innerHTML="FPS:";n=document.createElement("input");n.type="range";n.max=60;n.min=1;n.value=a.actuallyFrameRate;n.addEventListener("mousedown",function(a){a.stopPropagation();});function c(){var a=parseInt(n.value,10);if(!isNaN(a)){d.actuallyFrameRate=a;g("zz_debug_FrameRate_"+d.element.id,a);}}n.addEventListener("change",c);n.addEventListener("input",c);b.appendChild(m);b.appendChild(n);e.appendChild(b);})();(function(){var a=document.createElement("div");p=document.createElement("span");function b(a){var b=document.createElement("input");b.type="button";b.value=a;b.style.margin="5px 5px";b.style.width="100px";return b;}o=b("一時停止");o.addEventListener("click",function(a){if(d.running){d.pause();o.value="再生";p.innerHTML="現在:"+d.frameCount+"フレーム目停止中";}else{d.start();o.value="一時停止";p.innerHTML="現在:"+d.frameCount+"フレーム目再生中";}});a.appendChild(o);a.appendChild(p);e.appendChild(a);})();(function(){var b=document.createElement("div");var c=document.createElement("span");c.innerHTML="ステージ色:";var h=q=document.createElement("select");var i=[["透明",""],["半透明(黒10%)","rgba(0, 0, 0, 0.1)"],["半透明(黒25%)","rgba(0, 0, 0, 0.25)"],["黒","#000"],["白","#fff"],["赤","#f00"],["緑","#0f0"],["青","#00f"]];var j=parseInt(f("zz_debug_stageColor_"+d.element.id)||0,10);for(var k=0;k<i.length;k++){var l=i[k];h.innerHTML+=['<option value="',l[1],'">',l[0],"</option>"].join("");}h.options[j].selected=true;a.backgroundColor=h.options[j].value;h.addEventListener("mouseup",function(a){var b=h.options[h.selectedIndex].value;d.backgroundColor=b;g("zz_debug_stageColor_"+d.element.id,h.selectedIndex);});b.appendChild(c);b.appendChild(h);e.appendChild(b);})();(function(){var a=document.createElement("div");var b=document.createElement("span");b.innerHTML="ステージ外表示";var c=r=document.createElement("input");c.type="checkbox";c.addEventListener("click",function(a){d.style.overflow=c.checked?"":"hidden";g("zz_debug_stageOverflow_"+d.element.id,c.checked||"");});a.appendChild(b);a.appendChild(c);e.appendChild(a);})();}var k=document.createElement("option");k.innerHTML=a.element.id;k.selected=true;k.stage=a;l.appendChild(k);j(null,a);return e;}function t(a){var b=document.createElement("div");var c=document.createElement("span");c.innerHTML=a.title+":";var d=document.createElement("input");d.addEventListener("mousedown",function(a){a.stopPropagation();});d.addEventListener("mousemove",function(a){a.preventDefault();a.stopPropagation();});a.title=c;a.input=d;a.element=b;b.appendChild(c);b.appendChild(d);return b;}function u(a){var d=a.property;var e=t(a);var f=a.input;f.type="number";f.addEventListener("input",function(e){if(c&&f.value){var g=null;var h=parseInt(f.value,10);if(!isNaN(h))g=h/a.ratio;if(g!==null){c[d]=g;c.dispatchEvent(b.REDRAW);c.transform();}}e.preventDefault();});return e;}function v(a){var b=a.property;var d=t(a);var e=a.input;e.type="checkbox";e.addEventListener("click",function(a){if(c){var d=e.checked;if(d!==null){c[b]=d;c.dispatchEvent(zz.Event.ENTER_FRAME);}}});return d;}function w(b){function d(a,b,c){return ['<option name="',a,'" value="',b,'">',c,'</option>'].join("");}var e=[d("LT",a.LEFT|a.TOP,"左上"),d("LM",a.LEFT|a.MIDDLE,"左中"),d("LB",a.LEFT|a.BOTTOM,"左下"),d("CT",a.CENTER|a.TOP,"中上"),d("CM",a.CENTER|a.MIDDLE,"中中"),d("CB",a.CENTER|a.BOTTOM,"中下"),d("RT",a.RIGHT|a.TOP,"右上"),d("RM",a.RIGHT|a.MIDDLE,"右中"),d("RB",a.RIGHT|a.BOTTOM,"右下")].join("");var f=b.property;var g=document.createElement("div");var h=document.createElement("span");h.innerHTML=b.title+":";var i=document.createElement("select");i.innerHTML=e;i.addEventListener("mouseup",function(a){var b=i.options[i.selectedIndex].value;if(c){c[f]=b;c.transform();}});g.appendChild(h);g.appendChild(i);b.input=i;return g;}function x(a){var b=a.property;var d=t(a);d.style.display="none";var e=a.input;e.type="range";var f=a.title;function g(a){if(c&&e.value){var b=parseInt(e.value,10);if(c.playing)c.gotoAndPlay(b);else c.gotoAndStop(b);h();}a.preventDefault();}e.addEventListener("change",g);e.addEventListener("input",g);return d;}function y(a){if(c)(function b(a){a.style.outline="";if(a instanceof zz.DisplayObjectContainer)for(var c=0,d=a.numChildren;c<d;c++){var e=a.getChildAt(c);b(e);}})(c);var d=[{color:"rgb(0,50,255)",style:"solid",width:"3px"},{color:"rgb(50,150,255)",style:"dotted",width:"2px"},{color:"rgb(150,200,255)",style:"dashed",width:"1px"}];var e=d.length;var f=0;(function g(a){var b=d[f];a.style.outline=[b.width,b.style,b.color].join(" ");++f;if(f<e)if(a instanceof zz.DisplayObjectContainer)for(var c=0,h=a.numChildren;c<h;c++){var i=a.getChildAt(c);g(i);}--f;})(a);c=a;}function z(){this.opened=false;this.addEventListener(zz.TouchEvent.TOUCH_DOWN,function(a){if(!a.shiftKey){this.opened=true;y(this);var c=this.parent;while(c){c.opened=true;c=c.parent;}this.root.dispatchEvent(b.UPDATE_TREE);return true;}});if(zz.ENV.RENDERING_ENGINE=="Gecko")this.addEventListener(b.REDRAW,function(){var a=this.style.outline;var b=this;function c(){b.style.outline=a;}if(a){this.style.outline="";setTimeout(c,100);}});}function A(){var a=this;this.addEventListener(KeyboardEvent.KEY_DOWN,function(a){if(c){var d=false;var e=a.shiftKey?10:1;switch(a.keyCode){case Keyboard.LEFT:c.x-=e;d=true;break;case Keyboard.RIGHT:c.x+=e;d=true;break;case Keyboard.UP:c.y-=e;d=true;break;case Keyboard.DOWN:c.y+=e;d=true;break;default:break;}if(d){c.dispatchEvent(b.REDRAW);c.transform();h();return true;}}return false;});var d=k();var e=document.getElementById("zz_debug_object_tree");function g(){h();while(e.firstChild)e.removeChild(e.firstChild);function d(e,f){var g=document.createElement("div");g.className="zz_debug_group";var h=g.style;if(f===c)h.outline="1px solid #f00";else h.outline="";function i(){if(f.opened)if(f instanceof zz.DisplayObjectContainer)for(var a=0,b=f.numChildren;a<b;a++){var c=f.getChildAt(a);d(g,c);}}function j(){var c=document.createElement("input");c.type="button";var d=c.style;c.onmousedown=function(c){y(f);f.opened^=true;i();a.dispatchEvent(b.UPDATE_TREE);};var e="["+(f.name||"-")+"]";if(f instanceof zz.DisplayObjectContainer)e+=" ("+f.numChildren+")";else e+=" (-)";c.value=e;return c;}g.appendChild(j());e.appendChild(g);i();}d(e,this);}this.addEventListener(b.UPDATE_TREE,g);this.addEventListener(zz.Event.ENTER_FRAME,h);(function(){this.expectFrameRate=f("zz_debug_FrameRate_"+this.element.id)||this.frameRate;this.actuallyFrameRate=this.expectFrameRate;Object.defineProperty(this,"frameRate",{get:function(){return this.actuallyFrameRate;},set:function(a){this.expectFrameRate=a;}});var a=s(this);}).call(this);}A.prototype=zz.createClass(A,{onEnterFrame:function(){if(this.frameCount===undefined)this.frameCount=0;if(this.timeLineElement)this.timeLineElement.innerHTML=" 現在:"+this.frameCount+"フレーム目";++this.frameCount;}});function B(){}B.prototype=zz.createClass(B,{addChildAt:function(){this.root.dispatchEvent(b.UPDATE_TREE);},removeChild:function(){this.root.dispatchEvent(b.UPDATE_TREE);},setChildIndex:function(){this.root.dispatchEvent(b.UPDATE_TREE);},swapChildren:function(){this.root.dispatchEvent(b.UPDATE_TREE);}});function C(a,b){function c(){a.apply(this,arguments);if(typeof b!="function")throw new Error(b+" is not function.");b.apply(this,arguments);}c.prototype=a.prototype;function d(d){var e=b.prototype[d];var f=a.prototype[d];function g(){if(typeof f=="function")f.apply(this,arguments);if(typeof e=="function")e.apply(this,arguments);}c.prototype[d]=g;}for(var e in b.prototype)d(e);return c;}return zz.modularize(null,{DisplayObject:C(zz.DisplayObject,z),DisplayObjectContainer:C(zz.DisplayObjectContainer,B),Stage:C(zz.Stage,A)});}();