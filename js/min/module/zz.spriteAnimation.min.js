"use strict";zz.spriteAnimation=new function(){var a={LOAD_SPRITES:"__load_sprites__",ANIMATION_END:"__animation_end__"};var b="";function c(a){b=a;}function d(){zz.MovieClip.apply(this);this.setCommonPath("","");this.spriteLoaded=false;this.stop();this.loop=true;this.autoPlay=true;}d.prototype=zz.createClass(zz.MovieClip,{setCommonPath:function(a,c){this.prefix=b+a;this.suffix=c;},loadComplete:function(b){var c=this;function d(){++c.loadCount;if(c.loadCount===c.sprites.length){c.spritesLoaded=true;if(c.autoPlay)c.gotoAndPlay(1);c.dispatchEvent(a.LOAD_SPRITES);}b.removeEventListener(zz.Event.COMPLETE,d);}return d;},loadAnimation:function(a){if(!(a instanceof Array))a=Array.prototype.slice.call(arguments);this.sprites=new Array();this.loadCount=0;var b=a.length;for(var c=0;c<b;c++){var d=this.prefix+a[c]+this.suffix;var e=new zz.Sprite(d);e.visible=false;this.sprites.push(e);e.addEventListener(zz.Event.COMPLETE,this.loadComplete(e));this.addChild(e);}if(b>0)this.setAnimationInterval();},changeSprite:function(a){return function(){for(var b=0,c=this.numChildren;b<c;b++)if(a===b)this.getChildAt(b).visible=true;else this.getChildAt(b).visible=false;};},setSpriteByIndex:function(a){var b=a*this.intervalFrame+1;this.setFrame(b);},setAnimationInterval:function(b){if(b)this.intervalFrame=b;else if(!this.intervalFrame)this.intervalFrame=1;var c=this._getAnimationData();c.anim[c.timeLine+this.intervalFrame-1]={event:function(){if(!this.loop)this.stop();this.dispatchEvent(a.ANIMATION_END);}};this.setAnimation(c.anim);},_getAnimationData:function(){var a={anim:new Object(),timeLine:1};for(var b=0,c=this.numChildren;b<c;b++){if(b!==0)a.timeLine+=this.intervalFrame;a.anim[a.timeLine]={event:this.changeSprite(b)};}return a;}});function e(){d.apply(this);}e.prototype=zz.createClass(d,{loadAnimation:function(a,b,c,d){this.chipWidth=b;this.chipHeight=c;this.chipCount=d;var e=this.prefix+a+this.suffix;var f=new zz.MovieClip(e);f.visible=false;this.loadCount=0;var g=this;f.addEventListener(zz.Event.COMPLETE,function(){g.setAnimationInterval();g.loadComplete(f)();f.visible=true;});this.sprites=new Array();this.sprites.push(f);this.addChild(f);},setAnimationInterval:function(a){if(a)this.intervalFrame=a;else if(!this.intervalFrame)this.intervalFrame=1;var b=this._getAnimationData();this._setAnimationInterval();},_getAnimationData:function(){var a=1;var b=new Object();var c=this.sprites[0];var d=c.width/this.chipWidth;var e=c.height/this.chipHeight;for(var f=0;f<e;f++)for(var g=0;g<d;g++){b[a]={tx:g*this.chipWidth,ty:f*this.chipHeight,tw:this.chipWidth,th:this.chipHeight,stop:true};++a;}c.setAnimation(b);var h={anim:new Object(),timeLine:1};for(f=0;f<this.chipCount;f++){if(f!==0)h.timeLine+=this.intervalFrame;h.anim[h.timeLine]={event:function(){c.play();}};}}});return zz.modularize({setImagePath:c},{SpriteEvent:a,SpriteAnimation:d,SpriteSheetAnimation:e});}();