"use strict";zz.adv=new function(){var a="#ffffff";var b="#000000";var c=0.75;var d=50;var e=15;var f=20;var g=10;var h="170%";var i="5px ridge #0f00f0";function j(){zz.MovieClip.apply(this);var b=new zz.TextField();b.text="â–¼";b.textColor=a;this.addChild(b);this.width=30;this.height=30;this.setAnimation({1:{alpha:0,tween:true},15:{alpha:1,tween:true},30:{alpha:0,tween:true}});}j.prototype=zz.createClass(zz.MovieClip,{});function k(i,k,l){zz.DisplayObjectContainer.apply(this);this.backgroundColor=b;this.alpha=c;this.setSize(i,k);this.style.borderRadius=(l||e)+"px";this.textWait=d;this.text=new zz.TextField();this.text.textColor=a;this.text.style.lineHeight=h;var m=f;var n=g;this.text.style.padding=[n+"px",m+"px",0+"px"].join(" ");this.setTexts(new Array());this.readyIcon=new j();this.readyIcon.referencePoint=zz.ReferencePoint.BOTTOM|zz.ReferencePoint.RIGHT;this.readyIcon.setPosition(this.width-10,this.height-10);this.addChild(this.text);this.addChild(this.readyIcon);this.ready=true;this.current=null;var o=this;this._typewriter=function(){var a=o.textWait/o.root.frameRate;++o.count;if(o.count>a){o.count=0;++o.character;o.text.text=o.current[o.character-1];if(!o.current[o.character]){o.ready=true;o.removeEventListener(Event.ENTER_FRAME,o._typewriter);}}};}k.STATUS={START:1,READING:2,END:3};k.prototype=zz.createClass(zz.DisplayObjectContainer,{setTexts:function(a){this.index=-1;this.htmls=a;},erase:function(){this.text.text="";},next:function(){++this.index;var a=this.htmls[this.index];function b(a){var b=new Array();var c=new Object();var d={marks:new Object(),rt:false,rp:false,inside:function(){return this.rt||this.rp;}};function e(a){var d=b.length;if(d in c===false)c[d]=new Array();c[d].push(a);}function f(a,b,c){var f={tag:a,attrs:b,unary:c,start:true,createTag:function(){var d=["<",a];for(var e=0,f=b.length;e<f;e++)d.push(" "+b[e].name+"="+b[e].value);d.push(c?"/>":">");return d.join("");}};e(f);if(a=="rt")d.rt=true;if(a=="rp")d.rp=true;}function g(a){var b={tag:a,end:true,createTag:function(){return "</"+a+">";}};e(b);if(a=="rt")d.rt=false;if(a=="rp")d.rp=false;}HTMLParser(a,{start:function(a,b,c){f(a,b,c);},end:function(a){g(a);},chars:function(a){for(var c=0,e=a.length;c<e;c++){if(d.inside())d.marks[b.length]=true;b.push(a[c]);}},comment:function(a){}});var h=new Array();for(var i=0,j=b.length;i<j;i++){var k=b.slice(0,i+1);var l=new Array();var m=new Object();for(var n in c){var o=c[n].map(function(a){if(n<=i){if(!a.unary)if(a.start){if(a.tag in m===false)m[a.tag]=0;++m[a.tag];}else if(a.end)--m[a.tag];return a.createTag();}else if(!a.unary)if(a.end&&m[a.tag]>0){--m[a.tag];return a.createTag();}return "";});l.unshift({index:n,tag:o.join("")});}for(var p=0,q=l.length;p<q;p++){var r=l[p].index;if(r>i+1)r=i+1;k.splice(r,0,l[p].tag);}if(i+1 in d.marks===false)h.push(k.join(""));}return h||null;}this.current=b(a);},forward:function(){if(this.ready&&this.textWait!==0){this.character=1;this.count=0;this.text.text=this.current[this.character-1];this.addEventListener(Event.ENTER_FRAME,this._typewriter);this.ready=false;}else{this.removeEventListener(Event.ENTER_FRAME,this._typewriter);this.text.text=this.current[this.current.length-1];this.ready=true;}},read:function(){var a=k.STATUS.READING;if(this.ready){this.next();a=k.STATUS.START;}if(!this.htmls[this.index])a=k.STATUS.END;else this.forward();return a;},ready:{get:function(){return this._ready;},set:function(a){this._ready=a;if(this.readyIcon){this.readyIcon.visible=this._ready;if(this._ready)this.readyIcon.gotoAndPlay(1);else this.readyIcon.stop();}}}});function l(c,d,f){zz.Sprite.apply(this);this.setSize(c,d);this.backgroundColor=b;this.style.borderRadius=(f||e)+"px";this.style.border=i;this._name=new zz.TextField();this._name.referencePoint=zz.ReferencePoint.CENTER;this._name.setPosition(this.width/2,this.height/2);this._name.textColor=a;this.defaultNameColor=this.nameColor;this.addChild(this._name);this.nameColors=new Object();}l.prototype=zz.createClass(zz.Sprite,{name:{get:function(){return this._name.text;},set:function(a){this._name.text=a;if(a in this.nameColors)this.nameColor=this.nameColors[a];else this.nameColor=this.defaultNameColor;}},nameColor:{get:function(){return this._name.textColor;},set:function(a){this._name.textColor=a;}}});function m(a){var b=a.mc||new zz.Sprite(a.path);b.referencePoint=zz.ReferencePoint.CENTER;b.x=a.x||0;b.y=a.y||0;if(a.active!==undefined&&!a.active)b.brightness=-20;return b;}function n(a,b){zz.DisplayObjectContainer.call(this);this.imageContainer=new zz.DisplayObjectContainer();this.imageContainer.referencePoint=zz.ReferencePoint.BOTTOM|zz.ReferencePoint.CENTER;this.textArea=a;this.namePlate=b;this.addChild(this.imageContainer);this.addChild(a);this.addChild(b);}n.prototype=zz.createClass(zz.DisplayObjectContainer,{setData:function(a,b){this.names=new Array();this.images=new Array();var c=new Array();for(var d=0,e=a.length;d<e;d++){this.names.push(a[d].name);c.push(a[d].text);this.images.push(a[d].image);}this.textArea.setTexts(c);this.end=b;},preloadImages:function(a){var b=this.images.filter(function(a){if(a&&a.path)return true;}).map(function(a){return a.path;});zz.preload(b,a);},read:function(){var a=this.textArea.read();if(a===k.STATUS.END){if(typeof this.end=="function")this.end();}else if(a===k.STATUS.START){var b=this.names[this.textArea.index];if(b)this.namePlate.name=b;var c=this.images[this.textArea.index];for(var d=0,e=this.imageContainer.numChildren;d<e;d++){var f=this.imageContainer.getChildAt(d);f.removeSelf();}if(c){if(c instanceof Array===false)c=[c];for(d=0,e=c.length;d<e;d++){var g=c[d];this.imageContainer.addChild(new m(g));}}}},erase:function(){this.namePlate.name="";this.textArea.erase();},setUIPosition:function(a,b,c){this.namePlate.setPosition(a[0],a[1]);this.textArea.setPosition(b[0],b[1]);this.imageContainer.setPosition(c[0],c[1]);}});return{TextArea:k,NamePlate:l,ADVController:n};}();